(function(){"use strict";var e={3039:function(e,t,a){var s=a(9242),n=a(3396),r=a(2268);function o(e,t,a,s,o,i){const c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["app",{loginColor:i.isSignIn}])},[(0,n.Wm)(c)],2)}var i=a(7139),c={computed:{isSignIn(){return"/login"===this.$route.path}},methods:{...(0,i.OI)(["loadDataFromLocalStorage","loadDataFromSessionStorage"])},mounted(){null===sessionStorage.getItem("token")?null===localStorage.getItem("token")?this.$router.push("/login"):this.loadDataFromLocalStorage():this.loadDataFromSessionStorage()}},l=a(89);const u=(0,l.Z)(c,[["render",o]]);var d=u;const p={class:"wrapper"};function g(e,t,a,s,r,o){const i=(0,n.up)("nav-bar"),c=(0,n.up)("meetings");return(0,n.wg)(),(0,n.iD)("div",p,[(0,n.Wm)(i),(0,n.Wm)(c)])}const m=e=>((0,n.dD)("data-v-0252dd3e"),e=e(),(0,n.Cn)(),e),v={class:"header"},h=m((()=>(0,n._)("div",{class:"title-name title-names"},[(0,n._)("h3",{class:"logo-name"},"Sber clients")],-1))),w={class:"nav-bar-list"},_=m((()=>(0,n._)("input",{type:"checkbox",name:"",id:"checkbox_toggle"},null,-1))),f=m((()=>(0,n._)("label",{for:"checkbox_toggle",class:"hamburger"},[(0,n._)("span",{class:"hamburger-line"})],-1))),b={class:"menu-items"},y=m((()=>(0,n._)("button",{class:"log-out-item"},"Выйти",-1))),k=[y],S=m((()=>(0,n._)("button",{class:"nav-bar-notify-button"},[(0,n._)("img",{src:"/svg/notify.svg",alt:"",class:"nav-bar-notify-icon"})],-1))),I={class:"roo"},D=m((()=>(0,n._)("h1",{class:"qwe"},"Доступные комнаты",-1))),M=m((()=>(0,n._)("img",{src:"/svg/add-meet.svg",alt:"",class:"nav-bar-icon-add"},null,-1))),C=[M],P=m((()=>(0,n._)("button",{class:"nav-bar-profile"},[(0,n._)("img",{src:"/svg/profile.svg",alt:"",class:"nav-bar-profile-icon"})],-1))),$=m((()=>(0,n._)("hr",{class:"line-header"},null,-1)));function O(e,t,a,o,i,c){const l=(0,n.up)("loading-indicate"),u=(0,n.up)("v-popup");return(0,n.wg)(),(0,n.iD)("header",v,[(0,n._)("nav",null,[h,(0,n._)("ul",w,[_,f,(0,n._)("div",b,[(0,n._)("li",{class:"nav-bar-list-item",onClick:t[0]||(t[0]=t=>e.$router.push("/"))}," Главная страница "),(0,n._)("li",{class:"nav-bar-list-item",onClick:t[1]||(t[1]=t=>e.$router.push("/clients"))}," Мои клиенты "),(0,n._)("li",{class:"nav-bar-list-item",onClick:t[2]||(t[2]=t=>e.$router.push("/calendar"))}," Календарь "),(0,n._)("li",{class:"nav-bar-list-item",onClick:t[3]||(t[3]=t=>e.$router.push("/results"))}," Отчёты по встречам "),(0,n._)("li",{class:"nav-bar-list-item button-exit",onClick:t[4]||(t[4]=(...e)=>c.logOutWrapper&&c.logOutWrapper(...e))},k)])]),S,i.isInfoPopupVisible?((0,n.wg)(),(0,n.j4)(u,{key:0,onClosePopup:c.closeInfoPopup},{default:(0,n.w5)((()=>[(0,n._)("div",I,[D,i.isLoadedPlaces?(0,n.wy)(((0,n.wg)(),(0,n.iD)("select",{key:0,name:"",id:"",class:"select-room","onUpdate:modelValue":t[5]||(t[5]=e=>i.selected=e)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.places,(e=>((0,n.wg)(),(0,n.iD)("option",{key:e},(0,r.zw)(e.name),1)))),128))],512)),[[s.bM,i.selected]]):((0,n.wg)(),(0,n.j4)(l,{key:1}))])])),_:1},8,["onClosePopup"])):(0,n.kq)("",!0),(0,n._)("button",{class:"nav-bar-add-meet v-modal_add-meet",id:"btn-add",onClick:t[6]||(t[6]=(...e)=>c.showPopupInfo&&c.showPopupInfo(...e))},C),P,(0,n._)("button",{onClick:t[7]||(t[7]=(...e)=>c.logOutWrapper&&c.logOutWrapper(...e)),class:"log-out"},"Выйти")]),$])}const L=e=>((0,n.dD)("data-v-6eabaa24"),e=e(),(0,n.Cn)(),e),z={class:"popup_wrapper",ref:"popup_wrapper"},W={class:"v-popup"},x={class:"v-popup__header"},H=L((()=>(0,n._)("span",null,"Доступные переговорки",-1))),T={class:"v-popup__content"};function E(e,t,a,s,r,o){return(0,n.wg)(),(0,n.iD)("div",z,[(0,n._)("div",W,[(0,n._)("div",x,[H,(0,n._)("span",null,[(0,n._)("i",{class:"material-icons",onClick:t[0]||(t[0]=(...e)=>o.closePopup&&o.closePopup(...e))}," close ")])]),(0,n._)("div",T,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])])],512)}var j={props:{},data(){return{}},methods:{closePopup(){this.$emit("closePopup")}},mounted(){let e=this;document.addEventListener("click",(function(t){t.targer===e.$refs["popup_wrapper"]&&e.closePopup()}))}};const Z=(0,l.Z)(j,[["render",E],["__scopeId","data-v-6eabaa24"]]);var q=Z;const F=e=>((0,n.dD)("data-v-206c088c"),e=e(),(0,n.Cn)(),e),U={class:"loading-container"},V=F((()=>(0,n._)("div",{class:"loading-indicator"},null,-1))),N=F((()=>(0,n._)("p",{class:"information-text"},"Загрузка данных...",-1))),A=[V,N];function B(e,t,a,s,r,o){return(0,n.wg)(),(0,n.iD)("div",U,A)}var J={};const K=(0,l.Z)(J,[["render",B],["__scopeId","data-v-206c088c"]]);var Y=K,R=a(6265),G=a.n(R);const Q=G().create({baseURL:"http://sbermeeting.tk/",headers:{accept:"application/json"}});var X=Q,ee={actions:{async logIn(e,{username:t,password:a,isSavedSession:s}){const n=await re.auth(t,a);if(null===n)return e.commit("setErrorMessage",re.error),re.error="",!1;e.commit("setToken",n.auth_token);let r=!0;const o=await e.dispatch("getUser");return null===o&&(r=!1),s&&e.commit("saveSessionToLocalStorage"),e.commit("saveSessionToSessionStorage"),r&&e.commit("setErrorMessage",""),r},async getUser(e){const t=await re.currentUser(e.state.token);return null===t?(e.commit("setErrorMessage",re.error),re.error="",null):(e.commit("updateUser",t),t)}},mutations:{setToken(e,t){e.token=t},saveSessionToLocalStorage(e){localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user))},saveSessionToSessionStorage(e){sessionStorage.setItem("token",e.token),sessionStorage.setItem("user",JSON.stringify(e.user))},updateUser(e,t){e.user=t},loadDataFromLocalStorage(e){e.token=localStorage.getItem("token"),e.user=JSON.parse(localStorage.getItem("user"))},loadDataFromSessionStorage(e){e.token=sessionStorage.getItem("token"),e.user=JSON.parse(sessionStorage.getItem("user"))},logOut(e){e.token="",e.user={},localStorage.removeItem("token"),localStorage.removeItem("user"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user")},setErrorMessage(e,t){e.errorMessage=t}},state:{token:null,user:{},errorMessage:""},getters:{}};const te="api/v2/",ae="api/v1/",se={auth:"users/auth/token/login/",user:"users/employee/current/",meetings:"meeting",client:"clients/",contact:"contact/",place:"meetings/place/",employeelist:"employeelist/"},ne={error:{},async auth(e,t){try{const a=await X.post(te+se["auth"],{username:e,password:t});return a.data}catch(a){return this.errorHandle(a),null}},async currentUser(e){try{const e=await X.get(te+se["user"],{headers:{Authorization:"Token "+ee.state.token}});return e.data}catch(t){return this.errorHandle(t),null}},async getMeetings(e=!1){try{const t=await X.get(ae+se["meetings"]+(e?"?past=true":"/"));return t.data}catch(t){return this.errorHandle(t),[]}},async getClient(e){try{const t=await X.get(te+se["client"]+String(e),{headers:{Authorization:"Token "+ee.state.token}});return t.data}catch(t){return this.errorHandle(t),{}}},async getClients(){try{let e=await X.get(te+se["client"],{headers:{Authorization:"Token "+ee.state.token}});return e.data}catch(e){return this.errorHandle(e),[]}},async getContact(e){try{let t=await X.get(ae+se["contact"]+String(e));return t.data}catch(t){return this.errorHandle(t),{}}},async getContacts(){try{let e=await X.get(ae+se["contact"]);return e.data}catch(e){return this.errorHandle(e),[]}},async getPlaces(){try{let e=await X.get(te+se["place"]+"?my=true",{headers:{Authorization:"Token "+ee.state.token}});return e.data}catch(e){return this.errorHandle(e),[]}},async getFreePlaces(e,t,a){try{let s=await X.get(te+se["place"]+"?date="+a+"&start="+e+"&end="+t+"&my=true");return s.data}catch(s){return this.errorHandle(s),[]}},async createMeeting(e){try{const t=await X.post(ae+se["meetings"]+"/",e),a=await X.post(ae+se["employeelist"],{employee:t.data().creator,meeting:t.data().id});return a.data()}catch(t){return this.errorHandle(t),{}}},errorHandle(e){if(e.response)switch(e.response.status){case 400:this.error="Неверный логин/пароль";break;case 401:this.error=e.response.statusText+"."+e.response.data.detail;break;default:this.error=e.message+"."+e.response.statusText}else e.request&&(this.error="Bad connection")}};var re=ne,oe={components:{vPopup:q,LoadingIndicate:Y},methods:{...(0,i.OI)(["logOut"]),logOutWrapper(){this.$router.push("/login"),this.logOut()},showPopupInfo(){this.isInfoPopupVisible=!0},closeInfoPopup(){this.isInfoPopupVisible=!1}},data(){return{isInfoPopupVisible:!1,isLoadedPlaces:!1,places:[],selected:"test"}},async mounted(){const e=await re.getPlaces();this.places=e,this.isLoadedPlaces=!0}};const ie=(0,l.Z)(oe,[["render",O],["__scopeId","data-v-0252dd3e"]]);var ce=ie;const le=e=>((0,n.dD)("data-v-031ffc27"),e=e(),(0,n.Cn)(),e),ue={key:0,class:"near-meet"},de=le((()=>(0,n._)("h4",{class:"near-meet-text"},"Ближайшая встреча:",-1))),pe={class:"container-window"},ge=le((()=>(0,n._)("button",{class:"pencil-meet"},[(0,n._)("img",{src:"/svg/pencil.svg",alt:"",class:"pencil-icon"})],-1))),me={class:"client-wiindow"},ve={class:"window-tel-and-contact"},he={class:"contact-window"},we={class:"tel-window"},_e={class:"theme-window"},fe={class:"data-and-time-window"},be={class:"data-window"},ye={class:"time-window"},ke={class:"place-window"},Se={class:"green-button-add"},Ie={key:1,class:"list-meet"},De=le((()=>(0,n._)("h4",{class:"list-meet-text"},"Список встреч:",-1))),Me={class:"list-all-meet"},Ce={class:"data-time-place-item"},Pe={class:"data-item"},$e={class:"time-item"},Oe={class:"place-item"},Le={class:"theme-item"},ze={class:"client-item"};function We(e,t,a,s,o,i){const c=(0,n.up)("buttons"),l=(0,n.up)("loading-indicate");return(0,n.wg)(),(0,n.iD)("main",null,[o.isLoadedMeetings?((0,n.wg)(),(0,n.iD)("div",ue,[de,(0,n._)("div",pe,[ge,(0,n._)("p",me,(0,r.zw)(o.nearMeeting.client.name),1),(0,n._)("div",ve,[(0,n._)("p",he,(0,r.zw)(o.nearMeeting.contact.first_name)+" "+(0,r.zw)(o.nearMeeting.contact.second_name)+" "+(0,r.zw)(o.nearMeeting.contact.third_name),1),(0,n._)("p",we,(0,r.zw)(o.nearMeeting.contact.phone),1)]),(0,n._)("p",_e,(0,r.zw)(o.nearMeeting.topic),1),(0,n._)("div",fe,[(0,n._)("p",be,(0,r.zw)(o.nearMeeting.date),1),(0,n._)("p",ye,(0,r.zw)(o.nearMeeting.start)+" - "+(0,r.zw)(o.nearMeeting.end),1)]),(0,n._)("p",ke,(0,r.zw)(o.nearMeeting.place.name),1)]),(0,n._)("div",Se,[(0,n.Wm)(c)])])):(0,n.kq)("",!0),o.isLoadedMeetings?((0,n.wg)(),(0,n.iD)("div",Ie,[De,(0,n._)("ul",Me,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.meetings,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e,class:"all-meet-item"},[(0,n._)("div",Ce,[(0,n._)("p",Pe,(0,r.zw)(e.date),1),(0,n._)("p",$e,(0,r.zw)(e.start)+" - "+(0,r.zw)(e.end),1),(0,n._)("p",Oe,(0,r.zw)(e.place.name),1)]),(0,n._)("p",Le,(0,r.zw)(e.topic),1),(0,n._)("p",ze,(0,r.zw)(e.client.name),1)])))),128))])])):((0,n.wg)(),(0,n.j4)(l,{key:2,class:"indicator"}))])}const xe=e=>((0,n.dD)("data-v-6cab3fe2"),e=e(),(0,n.Cn)(),e),He={class:"button-add-meet"},Te=xe((()=>(0,n._)("button",{class:"add-meet-but"},"Добавить встречу",-1))),Ee=[Te];function je(e,t,a,s,r,o){return(0,n.wg)(),(0,n.iD)("div",He,Ee)}var Ze={};const qe=(0,l.Z)(Ze,[["render",je],["__scopeId","data-v-6cab3fe2"]]);var Fe=qe,Ue={components:{buttons:Fe,LoadingIndicate:Y},data(){return{meetings:[{client:{},place:{}}],nearMeeting:{contact:{},client:{},place:{}},isLoadedMeetings:!1}},async mounted(){this.meetings=await re.getMeetings(),this.prepareMeetingsForDisplay(),this.nearMeeting=this.meetings[0],this.isLoadedMeetings=!0},methods:{async prepareMeetingsForDisplay(){const e=await re.getClients(),t=new Map;e.forEach((e=>{t.set(e.id,e)}));const a=await re.getPlaces(),s=new Map;a.forEach((e=>{s.set(e.id,e)})),this.meetings.forEach((e=>{e.client=t.get(e.client),e.start=e.start.substr(0,5),e.end=e.end.substr(0,5),e.place=s.get(e.place)}));const n=await re.getContact(this.meetings[0].contact);this.meetings[0].contact=n}}};const Ve=(0,l.Z)(Ue,[["render",We],["__scopeId","data-v-031ffc27"]]);var Ne=Ve,Ae={components:{NavBar:ce,meetings:Ne}};const Be=(0,l.Z)(Ae,[["render",g],["__scopeId","data-v-235058b8"]]);var Je=Be;const Ke=e=>((0,n.dD)("data-v-116338af"),e=e(),(0,n.Cn)(),e),Ye={class:"login-container"},Re=Ke((()=>(0,n._)("h1",{class:"title"},"Вход в систему",-1))),Ge={key:0,class:"validate-error-message",id:"test"},Qe={key:1,class:"validate-error-message"},Xe={key:2,class:"validate-error-message"},et={class:"save-container"},tt=Ke((()=>(0,n._)("label",{for:"save",class:"save-label"},"Запомнить",-1))),at={key:3,class:"error-container"};function st(e,t,a,o,i,c){return(0,n.wg)(),(0,n.iD)("div",Ye,[(0,n._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)((()=>{}),["prevent"]))},[Re,(0,n.wy)((0,n._)("input",{type:"text",id:"login",name:"user_login","onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),placeholder:"Введите логин...",class:(0,r.C_)({invalid:o.v$.username.$error})},null,2),[[s.nr,i.username]]),o.v$.username.$error?((0,n.wg)(),(0,n.iD)("small",Ge," Логин не должен быть пустым! ")):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{type:"password",id:"password",name:"user_password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),placeholder:"Введите пароль...",class:(0,r.C_)({invalid:o.v$.password.$error})},null,2),[[s.nr,i.password]]),o.v$.password.$dirty&&o.v$.password.required.$invalid?((0,n.wg)(),(0,n.iD)("small",Qe," Пароль является обязательным полем! ")):(0,n.kq)("",!0),o.v$.password.minLength.$invalid?((0,n.wg)(),(0,n.iD)("small",Xe," Длина пароля должна быть больше 3 символов! ")):(0,n.kq)("",!0),(0,n._)("div",et,[(0,n.wy)((0,n._)("input",{type:"checkbox",id:"save",name:"selected_save","onUpdate:modelValue":t[2]||(t[2]=e=>i.isSavedSession=e)},null,512),[[s.e8,i.isSavedSession]]),tt]),(0,n._)("button",{type:"submit",onClick:t[3]||(t[3]=(...e)=>c.touchLogIn&&c.touchLogIn(...e))},"Далее"),c.isHaveErrorAuth()?((0,n.wg)(),(0,n.iD)("div",at,(0,r.zw)(this.$store.state.auth.errorMessage),1)):(0,n.kq)("",!0)],32)])}var nt=a(3053),rt=a(9117),ot={setup(){return{v$:(0,nt.ZP)()}},data(){return{username:"",password:"",isSavedSession:!1,passwordPlaceholder:"Введите пароль...",loginPlaceholder:"Введите логин..."}},validations(){return{username:{required:rt.C1},password:{required:rt.C1,minLength:(0,rt.Ei)(4)}}},methods:{...(0,i.nv)(["logIn"]),async touchLogIn(){const e=await this.v$.$validate();if(!e)return;const t=await this.logIn({username:this.username,password:this.password,isSavedSession:this.isSavedSession});t?this.$router.push("/"):this.$router.push("/login")},isHaveErrorAuth(){return""!==this.$store.state.auth.errorMessage},isValidForm(){const e=4;return this.validationErrors=[],!!(this.username.length&&this.password.length>=e)}}};const it=(0,l.Z)(ot,[["render",st],["__scopeId","data-v-116338af"]]);var ct=it;const lt=e=>((0,n.dD)("data-v-c28f1cf0"),e=e(),(0,n.Cn)(),e),ut=lt((()=>(0,n._)("h1",null,"Calendar page",-1)));function dt(e,t,a,s,r,o){const i=(0,n.up)("nav-bar"),c=(0,n.up)("loading-indicate");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(i),ut,(0,n.Wm)(c)])}var pt={components:{NavBar:ce,LoadingIndicate:Y}};const gt=(0,l.Z)(pt,[["render",dt],["__scopeId","data-v-c28f1cf0"]]);var mt=gt;const vt=(0,n._)("h1",null,"Clients page",-1);function ht(e,t,a,s,r,o){const i=(0,n.up)("nav-bar"),c=(0,n.up)("loading-indicate");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(i),vt,(0,n.Wm)(c)])}var wt={components:{NavBar:ce,LoadingIndicate:Y},data(){return{}}};const _t=(0,l.Z)(wt,[["render",ht]]);var ft=_t;const bt=(0,n._)("h1",null,"Meeting results page",-1);function yt(e,t,a,s,r,o){const i=(0,n.up)("nav-bar"),c=(0,n.up)("loading-indicate");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(i),bt,(0,n.Wm)(c)])}var kt={components:{NavBar:ce,LoadingIndicate:Y}};const St=(0,l.Z)(kt,[["render",yt]]);var It=St,Dt=a(2483);const Mt=[{path:"/",component:Je},{path:"/login",component:ct},{path:"/calendar",component:mt},{path:"/results",component:It},{path:"/clients",component:ft}],Ct=(0,Dt.p7)({routes:Mt,history:(0,Dt.PO)()});var Pt=Ct;const $t=(0,i.MT)({modules:{auth:ee}});var Ot=$t;const Lt=(0,s.ri)(d);Lt.use(Pt),Lt.use(Ot),Lt.mount("#app")}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,r){if(!s){var o=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],r=e[u][2];for(var i=!0,c=0;c<s.length;c++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](s[c])}))?s.splice(c--,1):(i=!1,r<o&&(o=r));if(i){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[s,n,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,r,o=s[0],i=s[1],c=s[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(c)var u=c(a)}for(t&&t(s);l<o.length;l++)r=o[l],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},s=self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(3039)}));s=a.O(s)})();
//# sourceMappingURL=app.7539e9f3.js.map