{"ast":null,"code":"export default {\n  actions: {\n    async logIn(context, {\n      username,\n      password\n    }) {\n      const res = await fetch(context.state.baseURL + \"users/auth/token/login/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      const token = await res.json();\n      context.commit(\"saveToken\", token.auth_token);\n    },\n\n    async getUser(context) {\n      const res = await fetch(context.state.baseURL + \"users/employee/current/\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": \"Token \" + context.state.token\n        }\n      });\n      const user = await res.json();\n      context.commit(\"updateUser\", user);\n    }\n\n  },\n  mutations: {\n    saveToken(state, token) {\n      localStorage.setItem(\"token\", token);\n      state.token = token;\n    },\n\n    updateUser(state, user) {\n      state.user = user;\n      console.log(state.user);\n    }\n\n  },\n  state: {\n    token: '',\n    user: {},\n    baseURL: \"http://sbermeeting.tk/api/v2/\"\n  },\n  getters: {}\n};","map":{"version":3,"names":["actions","logIn","context","username","password","res","fetch","state","baseURL","method","headers","body","JSON","stringify","token","json","commit","auth_token","getUser","user","mutations","saveToken","localStorage","setItem","updateUser","console","log","getters"],"sources":["/Users/root1/Developments/SberMeetingsWeb/WebApplication/vue-project/src/store/modules/auth.js"],"sourcesContent":["export default {\n    actions: {\n        async logIn(context, {username, password}) {\n            const res = await fetch(\n                context.state.baseURL + \"users/auth/token/login/\",\n                {\n                  method: \"POST\",\n                  headers: {\n                    \"Content-Type\": \"application/json\",\n                  },\n                  body: JSON.stringify({\n                    username,\n                    password\n                  }),\n                }\n              );\n        \n              const token = await res.json();\n              context.commit(\"saveToken\", token.auth_token);\n        },\n\n        async getUser(context) {\n            const res = await fetch(context.state.baseURL + \"users/employee/current/\", {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": \"Token \" + context.state.token\n                }\n              });\n        \n              const user = await res.json();\n              context.commit(\"updateUser\", user);\n        }\n    },\n    \n    mutations: {\n        saveToken(state, token) {\n            localStorage.setItem(\"token\", token);\n            state.token = token;\n        },\n\n        updateUser(state, user) {\n            state.user = user;\n            console.log(state.user);\n        }\n    },\n    \n    state: {\n        token: '',\n        user: {},\n        baseURL: \"http://sbermeeting.tk/api/v2/\"\n    },\n    \n    getters: {}\n}"],"mappings":"AAAA,eAAe;EACXA,OAAO,EAAE;IACL,MAAMC,KAAN,CAAYC,OAAZ,EAAqB;MAACC,QAAD;MAAWC;IAAX,CAArB,EAA2C;MACvC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CACnBJ,OAAO,CAACK,KAAR,CAAcC,OAAd,GAAwB,yBADL,EAEnB;QACEC,MAAM,EAAE,MADV;QAEEC,OAAO,EAAE;UACP,gBAAgB;QADT,CAFX;QAKEC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;UACnBV,QADmB;UAEnBC;QAFmB,CAAf;MALR,CAFmB,CAAvB;MAcE,MAAMU,KAAK,GAAG,MAAMT,GAAG,CAACU,IAAJ,EAApB;MACAb,OAAO,CAACc,MAAR,CAAe,WAAf,EAA4BF,KAAK,CAACG,UAAlC;IACL,CAlBI;;IAoBL,MAAMC,OAAN,CAAchB,OAAd,EAAuB;MACnB,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAACJ,OAAO,CAACK,KAAR,CAAcC,OAAd,GAAwB,yBAAzB,EAAoD;QACvEC,MAAM,EAAE,KAD+D;QAEvEC,OAAO,EAAE;UACL,gBAAgB,kBADX;UAEL,iBAAiB,WAAWR,OAAO,CAACK,KAAR,CAAcO;QAFrC;MAF8D,CAApD,CAAvB;MAQE,MAAMK,IAAI,GAAG,MAAMd,GAAG,CAACU,IAAJ,EAAnB;MACAb,OAAO,CAACc,MAAR,CAAe,YAAf,EAA6BG,IAA7B;IACL;;EA/BI,CADE;EAmCXC,SAAS,EAAE;IACPC,SAAS,CAACd,KAAD,EAAQO,KAAR,EAAe;MACpBQ,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BT,KAA9B;MACAP,KAAK,CAACO,KAAN,GAAcA,KAAd;IACH,CAJM;;IAMPU,UAAU,CAACjB,KAAD,EAAQY,IAAR,EAAc;MACpBZ,KAAK,CAACY,IAAN,GAAaA,IAAb;MACAM,OAAO,CAACC,GAAR,CAAYnB,KAAK,CAACY,IAAlB;IACH;;EATM,CAnCA;EA+CXZ,KAAK,EAAE;IACHO,KAAK,EAAE,EADJ;IAEHK,IAAI,EAAE,EAFH;IAGHX,OAAO,EAAE;EAHN,CA/CI;EAqDXmB,OAAO,EAAE;AArDE,CAAf"},"metadata":{},"sourceType":"module"}